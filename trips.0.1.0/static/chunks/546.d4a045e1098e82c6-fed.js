"use strict";(self.webpackChunktrips=self.webpackChunktrips||[]).push([[546],{824:function(n,t,e){e.d(t,{v:function(){return u}});var r=(0,e(2918).r)({}),i=(r.AnalyticsServiceProvider,r.useAnalyticsService);function o(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){o(n,t,e[t])}))}return n}function u(n){var t=i(),e=t.trackSatellite,r=t.setDigitalData,o=null!==n&&void 0!==n?n:"acct";return function(n){var t=n.eventName,i=n.title,u=n.notificationMessage,c=n.eventAttributes;r("event",[{eventInfo:{eventName:t},attributes:a({title:i},u?{notificationMessage:u}:{},void 0===c?{}:c)}]),e("".concat(o,"_clickevent"))}}},4260:function(n,t,e){var r,i,o,a,u,c;e.d(t,{Gm:function(){return l},DV:function(){return s},UD:function(){return f}}),(i=r||(r={})).Booked="BOOKED",i.Cancelled="CANCELLED",i.Modified="MODIFIED",(a=o||(o={})).Room="ROOM",a.Show="SHOW",a.Dining="DINING",(c=u||(u={})).Room="RoomProductDetails",c.Show="ShowProductDetails",c.Dining="DiningProductDetails";var l=function(n){return n.bookingDomain===o.Room&&function(n){return!!n.roomDetails}(n.product)},s=function(n){return n.bookingDomain===o.Dining&&function(n){return!!n.restaurantDetails}(n.product)},f=function(n){return n.bookingDomain===o.Show}},546:function(n,t,e){e.r(t),e.d(t,{FeaturedTrip:function(){return cn},default:function(){return ln}});var r,i,o=e(5893),a=e(1425),u=e(6736),c=e.n(u),l=e(824),s=e(7678),f=e(4738);function m(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function p(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){m(n,t,e[t])}))}return n}function d(){var n,t,e=(n=["\n  query getTrips($tripsFilter: CustomerTripSearchFilter) {\n    me {\n      id\n      trips(tripSearchFilter: $tripsFilter) {\n        tripId\n        tripName\n        location\n        startDate\n        endDate\n        productsMetadata {\n          bookingDomain\n          confirmationNumber\n          propertyId\n          status\n          hidden\n          numGuests\n          product {\n            __typename\n            ... on RoomProductDetails {\n              isOTA\n              operaState\n              checkInDate\n              checkOutDate\n              roomDetails {\n                name\n                property {\n                  regionName\n                  name\n                }\n                images {\n                  overview {\n                    url\n                  }\n                }\n              }\n            }\n\n            ... on DiningProductDetails {\n              restaurantId\n              reservationDateTime\n              restaurantDetails {\n                name\n                property {\n                  name\n                  regionName\n                }\n                images {\n                  overview {\n                    url\n                  }\n                }\n              }\n            }\n\n            ... on ShowProductDetails {\n              showId\n              showEventId\n              eventDateTime\n              showDetails {\n                name\n                property {\n                  name\n                  regionName\n                }\n                images {\n                  overview {\n                    url\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"],t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})));return d=function(){return e},e}(i=r||(r={})).All="ALL",i.Future="FUTURE",i.Past="PAST";var v,b,y=(0,s.Ps)(d());(b=v||(v={})).UnknownError="unknown-error",b.ContactMemberServices="contact-member-services",b.ContactReservationsMgmri="contact-reservations-mgmri";var g=e(2598);function h(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function D(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){h(n,t,e[t])}))}return n}function O(n,t){if(null==n)return{};var e,r,i=function(n,t){if(null==n)return{};var e,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}function w(){var n=(0,g.useRouter)(),t=c().useCallback((function(t){if("http://localhost:3000"===location.origin)return n.replace({pathname:"/[propertySlug]".concat(t.pathname),query:D({},t.query||{},{propertySlug:n.query.propertySlug})});var e=t.query||{},r=(e.propertySlug,O(e,["propertySlug"]));return n.replace({pathname:t.pathname,query:r})}),[n]),e=c().useCallback((function(t){if("http://localhost:3000"===location.origin)return n.push({pathname:"/[propertySlug]".concat(t.pathname),query:D({},t.query||{},{propertySlug:n.query.propertySlug})});var e=t.query||{},r=(e.propertySlug,O(e,["propertySlug"]));return n.push({pathname:t.pathname,query:r})}),[n]);return c().useMemo((function(){return D({},n,{replace:t,push:e})}),[n,t,e])}var j=e(4260),S=e(2059),P=e(3035);function k(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function C(){var n=k(["\n    margin-top: 2.75rem;\n  "]);return C=function(){return n},n}function M(){var n=k(["\n  margin-top: ",";\n\n  ","\n"]);return M=function(){return n},n}function x(){var n=k(["\n  margin-bottom: ",";\n"]);return x=function(){return n},n}var I=P.styled.div(M(),P.$spacingXtraLarge,P.media.md(C())),T=((0,P.styled)(a.Heading28)(x(),P.$spacingXtraLarge),{buttonHideDetailsLabel:"",buttonShowDetailsLabel:"",reservationClickLabel:"",reservationClickConfirmationModal:{title:"",description:"",primaryButtonLabel:"",secondaryButtonLabel:""},failureConfirmationModal:{title:"",description:"",primaryButtonLabel:"",secondaryButtonLabel:""},reservationConfirmationNumberLabel:"",numberOfGuestsLabel:"Guests",secondaryGuestNameLabel:"",secondaryGuestReservationNumberLabel:"",startDateLabel:"Check In",endDateLabel:"Check Out"});function L(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var G=function(n){var t=n.isPast;return[{action:n.action,actionLabel:"View Itinerary",shape:t?"inline":"pill",icon:t&&(0,o.jsx)(a.ForwardIcon,{}),size:"small",variant:"primary"}]},A=function(n){return n.map((function(n){return{name:n.product.roomDetails.name,numberOfGuests:n.numGuests}}))},N=function(n){return(0,j.UD)(n)?function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){L(n,t,e[t])}))}return n}({},T,{numberOfGuestsLabel:"Tickets"}):T},E=function(n){var t=n.trip,e=n.isPast,r=n.staticUrl,i=n.isMobile,o=n.onClick,a=t.tripId,u=t.location,c=t.productsMetadata,l=(0,S.Yp)(t)[0],s=c.filter(j.Gm),f=N(l),m=function(n){var t=n.reservations,e=n.staticUrl,r=n.isMobile;if(!(t.length<2)){var i=t.filter((function(n){return!(0,j.Gm)(n)}));if(0!==i.length){var o=(0,S.ar)(i),a=0,u=4;0===t.filter(j.Gm).length&&(a+=1,u+=1),r&&(u-=1);var c=o.slice(a,u),l=o.slice(u);return{sectionMessage:{labelHTML:l.length>0?"+ ".concat(l.length," more"):"",align:"right"},image:c.map((function(n){return{url:"".concat(e).concat(n.product[(0,S.S$)(n)].images.overview.url)}}))}}}}({reservations:c,staticUrl:r,isMobile:i});return{itemId:a,regionTitle:u,content:f,roomDetails:(0,j.Gm)(l)&&A(s),restaurantDetails:!(0,j.Gm)(l)&&(0,S.Li)(l),imageSrc:"".concat(r).concat((0,S.d5)(l)),resortTitle:(0,S.z0)(l),actionItems:G({isPast:e,tripId:a,action:o}),stayDates:(0,S.cA)({reservation:l,isPast:e}),reservationThumbnails:m}};function R(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function $(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){R(n,t,e[t])}))}return n}var z=function(n){var t=n.trip,e=n.isPast,r=void 0!==e&&e,i=n.ConfigContext,c=w(),s=(0,u.useContext)(a.ViewportContext),f=(0,u.useContext)(i).staticUrl,m=(0,l.v)("trips"),p=E({trip:t,isPast:r,staticUrl:f,isMobile:!s.minMd,onClick:function(){var n=(0,S.Yp)(t);if(null===n||void 0===n?void 0:n[0]){var e=n[0],r={propertyName:(0,S.Aj)(e),reservationNumber:e.confirmationNumber,reservationType:(0,S.rd)(e),daysBeforeArrival:(0,S.bS)((0,S.W$)(e))};(0,j.Gm)(e)&&(r.roomType=e.product.roomDetails.name),(0,j.UD)(e)&&(r.showName=e.product.showDetails.name),(0,j.DV)(e)&&(r.restaurantName=e.product.restaurantDetails.name),m({eventName:"trips - view itinerary - click",title:"view itinerary",eventAttributes:r}),setTimeout((function(){c.push({pathname:"/itinerary/",query:{trip_id:t.tripId}})}),400)}}});return(0,o.jsx)(I,{"data-testid":"trip-card",children:(0,o.jsx)(a.RoomReservationCard,$({},p))})};function U(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function q(){var n=U(["\n    font-size: 35px;\n    margin-bottom: 14px;\n  "]);return q=function(){return n},n}function F(){var n=U(["\n  margin-bottom: ",";\n  font-size: ",";\n  cursor: pointer;\n\n  ",";\n"]);return F=function(){return n},n}function B(){var n=U(["\n  font-weight: 400;\n  line-height: 1.5;\n"]);return B=function(){return n},n}function V(){var n=U(["\n  margin-bottom: ",";\n"]);return V=function(){return n},n}function H(){var n=U(["\n  margin: ",";\n"]);return H=function(){return n},n}function Y(){var n=U(["\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: auto;\n  transition: 0.5s ease;\n  backface-visibility: hidden;\n  cursor: pointer;\n"]);return Y=function(){return n},n}function X(){var n=U(["\n    flex-direction: row;\n  "]);return X=function(){return n},n}function Z(){var n=U(["\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n\n  ","\n"]);return Z=function(){return n},n}function _(){var n=U(["\n    padding: 3rem;\n    margin-top: 24px;\n    margin-bottom: 0;\n  "]);return _=function(){return n},n}function W(){var n=U(["\n  flex: 1;\n  max-width: none;\n  margin-top: ",";\n  margin-bottom: ",";\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  ","\n"]);return W=function(){return n},n}function K(){var n=U(["\n    min-width: 40%;\n  "]);return K=function(){return n},n}function J(){var n=U(["\n  padding: 0;\n  min-width: 100%;\n\n  ","\n"]);return J=function(){return n},n}var Q=(0,P.styled)(a.Heading35)(F(),P.$spacingSmall,P.$heading5,P.media.minMd(q())),nn=(0,P.styled)(a.Text16)(B()),tn=P.styled.div(V(),P.$spacingXtraLarge),en=P.styled.div(H(),P.$spacingXSmallSmall),rn=P.styled.div(Y()),on=(0,P.styled)(a.GridRow)(Z(),P.media.minMd(X())),an=(0,P.styled)(a.GridColumn)(W(),P.$spacingLarge,P.$spacingLarge,P.media.minMd(_())),un=(0,P.styled)(a.GridColumn)(J(),P.media.minMd(K())),cn=function(n){var t,e,i=n.title,c=n.description,s=n.action,m=n.imageUrl,d=n.useErrorMessage,b=(0,l.v)(),g=s.url,h=s.variant,D=s.shape,O=s.label,j=w(),P=(e={tripsFilter:{queryType:r.Future}},(0,f.a)(y,{variables:p({},e)})),k=P.loading,C=P.data,M=P.error,x=(0,u.useMemo)((function(){return(0,S.i8)(C).filter(S.RT)}),[C]),I=null===(t=(0,S.nH)(x))||void 0===t?void 0:t[0],T=d().setErrorMessageById;M&&T(v.UnknownError);var L=function(){b({eventName:"account - view my trips - click",title:"view my trips"}),setTimeout((function(){return j.push({pathname:g})}),400)};return(0,o.jsxs)(on,{className:"CardMain",children:[(0,o.jsxs)(an,{className:"CardContent",children:[(0,o.jsx)(Q,{role:"link",onClick:L,children:i}),(0,o.jsx)(tn,{children:(0,o.jsx)(nn,{children:c})}),(0,o.jsx)(en,{children:(0,o.jsx)(a.Button,{variant:h,shape:D,role:"link",onClick:L,children:O})})]}),(0,o.jsxs)(un,{children:[k&&(0,o.jsx)(a.EmptyState,{loading:!0}),!k&&I&&(0,o.jsx)(z,{trip:I,ConfigContext:a.ConfigContext},I.tripId),!k&&!I&&(0,o.jsx)(a.AspectRatioBox,{ratio:16/9,style:{borderRadius:"8px",height:"100%",width:"100%"},children:(0,o.jsx)(rn,{onClick:L,"data-testid":"CalendarImage",children:(0,o.jsx)(a.Image,{src:m,alt:"Calendar Image",withLoadingAnimation:!0})})})]})]})},ln=cn},2059:function(n,t,e){e.d(t,{kT:function(){return b},W$:function(){return D},eh:function(){return h},Aj:function(){return f},S$:function(){return s},d5:function(){return d},z0:function(){return v},cA:function(){return j},rd:function(){return m},Yp:function(){return P},Li:function(){return p},RT:function(){return l},i8:function(){return c},bS:function(){return g},ar:function(){return S},nH:function(){return k}});var r,i=e(3035),o=e(9490);!function(n){n.Past3Months="Past 3 Months",n.Past6Months="Past 6 Months",n.PastYear="Past Year",n.AllTrips="All Trips"}(r||(r={}));var a=e(4260);e(4155);function u(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(n){return n&&n.me&&n.me.trips?n.me.trips:[]},l=function(n){if(!(null===n||void 0===n?void 0:n.productsMetadata))return!1;var t=n.productsMetadata,e=t.filter(a.Gm),r=t.filter(a.DV),i=t.filter(a.UD);return e.length+r.length+i.length>0},s=function(n){return(0,a.Gm)(n)?"roomDetails":(0,a.DV)(n)?"restaurantDetails":"showDetails"},f=function(n){return n.product[s(n)].property.name},m=function(n){return(0,a.Gm)(n)?"room":(0,a.DV)(n)?"dining":"show"},p=function(n){var t=n.product,e=n.numGuests;return{name:t[s(n)].name,numberOfGuests:e}},d=function(n){var t,e,r,i=null===(t=n.product[s(n)])||void 0===t||null===(e=t.images)||void 0===e||null===(r=e.overview)||void 0===r?void 0:r.url;return null!==i&&void 0!==i?i:""},v=function(n){return n.product[s(n)].property.name},b=function(n){var t=n.startDate,e=n.endDate;return o.ou.fromISO(e).diff(o.ou.fromISO(t),"days").as("days")},y=function(n){return(0,a.DV)(n)?n.product.reservationDateTime:n.product.eventDateTime},g=function(n){return 0===n?"zero":n},h=function(n){return Math.ceil(o.ou.fromISO(n,{zone:"utc"}).toLocal().diffNow().as("days"))},D=function(n){return h((0,a.Gm)(n)?n.product.checkInDate:y(n))},O=function(n){return n.hasSame(o.ou.local(),"day")},w=function(n){return n.toFormat("MMM d".concat(function(n){return n.hasSame(o.ou.local(),"year")}(n)?"":", yyyy"))},j=function(n){var t=n.reservation,e=n.isPast;return(0,a.Gm)(t)?function(n){var t=n.reservation,e=n.isPast,r=t.product,a=r.checkInDate,u=r.checkOutDate,c=o.ou.fromISO(a),l=o.ou.fromISO(u);return{formattedStartDate:O(c)?"Today":w(c),formattedEndDate:O(l)?"Today":w(l),arrowColor:e&&i.$grey}}({reservation:t,isPast:e}):function(n){var t=(0,a.DV)(n)?n.product.reservationDateTime:n.product.eventDateTime,e=o.ou.fromISO(t,{zone:"utc"}).toLocal();return{dateLabel:(0,a.DV)(n)?"Date & Time":"Showtime",reservationDate:O(e)?"Today":e.toLocaleString({month:"short",weekday:"long",day:"numeric"}),reservationTime:e.toFormat("h:mm a ZZZZ")}}(t)},S=function(n){return u(n).sort((function(n,t){return y(n).localeCompare(y(t))}))},P=function(n){var t=n.productsMetadata,e=t.filter(a.Gm);return e.length>0?e:0===t.length?[]:1===t.length?t:S(t)},k=function(n){return u(n).sort((function(n,t){return n.startDate.localeCompare(t.startDate)}))}}}]);